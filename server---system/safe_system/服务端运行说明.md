
## 🖥️ 仅启动服务端说明

如果您只需要启动服务端（不需要Web界面），以下是详细的启动方式和所需文件：

### 🚀 服务端启动方式

#### 方式一：异步服务器（推荐，高性能）
```powershell
python start_async_server.py
```

#### 方式二：多进程服务器（高并发）
```powershell
python main_server.py
```

#### 方式三：基础服务器（简单）
```powershell
python main.py
```

### 📁 服务端所需文件清单

#### 核心启动文件
```
根目录/
├── start_async_server.py          # 异步服务器启动入口（推荐）
├── main_server.py                 # 多进程服务器启动入口
├── main.py                        # 基础服务器启动入口
├── config.py                      # 服务器配置文件
└── requirements.txt               # Python依赖包
```

#### 服务端核心模块
```
server/                            # 服务端核心模块目录
├── __init__.py                    # 模块初始化文件
├── async_core.py                  # 异步服务器核心逻辑
├── core.py                        # 基础服务器核心逻辑
├── multi_core.py                  # 多进程服务器核心逻辑
├── storage.py                     # 数据库存储管理
├── auth.py                        # 用户认证系统
├── directory.py                   # 在线目录管理
├── group.py                       # 群组管理
├── connection_manager.py          # 连接管理器
└── async_message_processor.py     # 异步消息处理器
```

#### 通用模块
```
common/                            # 通用模块目录
├── __init__.py                    # 模块初始化文件
├── message_structures.py          # 消息结构体定义
├── async_protocol.py              # 异步协议处理
├── packet.py                      # 数据包处理
├── schema.py                      # 数据架构定义
├── crypto.py                      # 加密解密功能
├── stego.py                       # 信息隐藏功能
└── utils.py                       # 工具函数
```

#### 数据文件（运行时自动创建）
```
数据文件/
├── secure_chat.db                 # SQLite数据库文件（自动创建）
├── async_server.log               # 异步服务器日志文件（自动创建）
├── secure_server.log              # 基础服务器日志文件（自动创建）
└── data/                          # 数据目录（自动创建）
    └── contacts/                  # 联系人数据目录
```

### 🔧 服务端启动参数

#### 异步服务器参数
```powershell
python start_async_server.py --help
```
常用参数：
```powershell
python start_async_server.py \
  --host localhost \
  --port 8765 \
  --max-connections 10000 \
  --workers 8 \
  --log-level INFO
```

#### 多进程服务器参数
```powershell
python main_server.py \
  --host localhost \
  --port 8765 \
  --max-connections 1000
```

#### 基础服务器参数
```powershell
python main.py \
  --host localhost \
  --port 8765 \
  --max-connections 100
```

### 📊 服务端功能对比

| 特性 | 异步服务器 | 多进程服务器 | 基础服务器 |
|------|-----------|-------------|-----------|
| 并发连接数 | 10,000+ | 1,000+ | 100+ |
| 内存使用 | 低 | 中等 | 低 |
| CPU使用 | 高效 | 多核利用 | 单核 |
| 启动速度 | 快 | 中等 | 快 |
| 稳定性 | 高 | 高 | 中等 |
| 推荐场景 | 生产环境 | 高负载 | 开发测试 |

### ⚙️ 最小运行环境

如果您想要最精简的服务端运行环境，最少需要以下文件：

**核心必需文件（异步服务器）：**
```
项目根目录/
├── start_async_server.py          # 启动文件
├── config.py                      # 配置文件
├── requirements.txt               # 依赖文件
├── server/                        # 服务端模块
│   ├── __init__.py
│   ├── async_core.py
│   ├── storage.py
│   ├── auth.py
│   ├── directory.py
│   ├── group.py
│   ├── connection_manager.py
│   └── async_message_processor.py
└── common/                        # 通用模块
    ├── __init__.py
    ├── message_structures.py
    ├── async_protocol.py
    ├── packet.py
    ├── schema.py
    ├── crypto.py
    └── utils.py
```

### 🔍 验证服务端启动

启动服务端后，您可以通过以下方式验证：

1. **查看控制台输出**：
```
🚀 异步安全即时通讯服务器 v2.0
✅ 服务器启动成功，监听地址: localhost:8765
```

2. **检查端口监听**：
```powershell
netstat -ano | findstr :8765
```

3. **查看日志文件**：
```powershell
Get-Content -Path "async_server.log" -Tail 10
```

4. **使用客户端测试**：
```powershell
python demo_client.py
```

### 💡 服务端使用建议

1. **开发环境**：使用 `python start_async_server.py`
2. **生产环境**：使用异步服务器 + 适当的参数配置
3. **高并发场景**：调整 `--max-connections` 和 `--workers` 参数
4. **调试问题**：使用 `--log-level DEBUG` 获取详细日志

---
